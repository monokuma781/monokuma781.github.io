<!-- saved from url=(0022)http://internet.e-mail -->
<!-- saved from url=(0022)http://internet.e-mail -->
<html>
<head>
<title>光辉历程</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<link rel="stylesheet" href="../css/ncic.css" type="text/css">
</head>

<body bgcolor="#FFFFFF" text="#000000" leftmargin="0" topmargin="0">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="547"><img src="../image/top.jpg" width="547" height="123"></td>
    <td background="../image/top_1.jpg" align="right"><img src="../image/top_2.jpg" width="131" height="123"></td>
  </tr>
</table>
<table width="720" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="163" align="center" valign="top"> 
      <table width="163" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td><a href="../about/about.htm"><img src="../image/niu1.jpg" width="163" height="26" border="0"></a></td>
        </tr>
      </table>
      <table width="163" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td><a href="../product/product.htm"><img src="../image/niu2.jpg" width="163" height="23" border="0"></a></td>
        </tr>
      </table>
      <table width="163" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td><a href="road.htm"><img src="../image/niu3.jpg" width="163" height="23" border="0"></a></td>
        </tr>
        <tr> 
          <td><a href="../paper/paper.htm"><img src="../image/niu4.jpg" width="163" height="23" border="0"></a></td>
        </tr>
        <tr> 
          <td><a href="../now/now.htm"><img src="../image/niu5.jpg" width="163" height="24" border="0"></a></td>
        </tr>
        <tr> 
          <td><a href="../news/news.htm"><img src="../image/niu6.gif" width="163" height="23" border="0"></a></td>
        </tr>
        <tr> 
          <td><a href="../link/link.htm"><img src="../image/niu7.jpg" width="163" height="23" border="0"></a></td>
        </tr>
        <tr> 
          <td><a href="../service/service.htm"><img src="../image/niu8.jpg" width="163" height="24" border="0"></a></td>
        </tr>
      </table>
      <br>
      <a href="../index.htm"><img src="../image2/back.gif" width="80" height="17" align="right" border="0"></a></td>
    <td width="30">&nbsp;</td>
    <td valign="top" align="right"> 
      <table width="480" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td align="right" valign="bottom"><img src="../image2/top3.jpg" width="476" height="97"></td>
        </tr>
        <tr> 
          <td align="right" height="3" valign="bottom"><img src="../image/line.gif" width="481" height="3"></td>
        </tr>
      </table>
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td height="10"><img src="../images/spacer.gif" width="1" height="1"></td>
        </tr>
      </table>
      <table width="480" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td width="11"><img src="../images/history_bar_start.gif" width="11" height="22"></td>
          <td background="../images/history_bar_bg.gif" width="100" class="padding01"><font color="#FF6600">成长历程</font></td>
          <td width="7"><img src="../images/history_bar_splite.gif" width="7" height="22"></td>
          <td background="../images/history_bar_bg01.gif" align="right">&nbsp; </td>
          <td width="10"><img src="../images/history_bar_end.gif" width="10" height="22"></td>
        </tr>
      </table>
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td height="5"><img src="../images/spacer.gif" width="1" height="1"></td>
        </tr>
      </table>
      <table width="480" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td width="11"><img src="../images/history_cor01.gif" width="11" height="6"></td>
          <td background="../images/history_tbg.gif"><img src="../images/history_tbg.gif" width="7" height="6"></td>
          <td width="10"><img src="../images/history_cor02.gif" width="10" height="6"></td>
        </tr>
      </table>
      <table width="480" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td bgcolor="#BA7429" width="1"><img src="../images/spacer.gif" width="1" height="1"></td>
          <td align="center"> 
            <table width="92%" border="0" cellspacing="1" cellpadding="1">
              <tr> 
                <td background="../image2/bg3.gif" height="160"> 
                  <div align="center"> 
                    <p><font size="3"><b>曙光2000超级服务器中的芯片和高速电路设计</b></font></p>
                    <p>方信我<br>
                      2002年9月</p>
                  </div>
                </td>
              </tr>
            </table>
            <table width="92%" border="0" cellspacing="1" cellpadding="1">
              <tr> 
                <td> 
                  <p>　　曙光2000超级服务器自行研制的硬件包括有：二维MESH网络蛀洞切换机制的专用ASIC芯片nWRC2016EA(以下简称WRC)；PMI板，即节点机(HOME) 
                    中PCI总线与MESH网络节点连接接口板和多个节点通过WRC互连起来的网络节点底板。<br>
                  </p>
                  <p>　　曙光2000硬件体系结构是MPP中的CLUSTER机种。它由多个节点机通过专用互连网络芯片WRC，以MESH方式互连起来。每一WRC芯片有五对入/出通路，分别与节点机Home、正X方向相邻的WRC、负X方向相邻的WRC、正Y方向相邻的WRC、负Y方向相邻的WRC互相连接。每一块WRC底板有八枚WRC，则可与八台Home节点机相连；底板内相邻的WRC的正X向与负X向相连、正Y向与负Y向相连；相邻底板的正X向与负X向相连、正Y向与负Y向相连。<br>
                  </p>
                  <p>　　从技术角度来讲，它主要涉及到两方面设计技术。一是WRC芯片设计技术；二是高速电路传输技术。<br>
                  </p>
                  <p><b>一、WRC芯片设计技术</b><br>
                  </p>
                  <p>　　WRC芯片设计技术，从体系结构和逻辑实现角度来看，它与CPU的设计有着很大的区别，但从物理实现的步骤和电路技术角度来看又与CPU的ASIC设计有许多相同之处。<br>
                  </p>
                  <p>　　在高速互连芯片WRC的ASIC设计中，我们同样经历了ASIC设计几个主要的步骤，即逻辑行为描述，逻辑行为仿真，门级综合，门级仿真（前仿真），形成网表，厂家布局布线，后仿真，厂家芯片生产，厂家芯片测试和芯片提交等等。<br>
                  </p>
                  <p>　　然而，WRC的设计又有自己的特殊性，其中与CPU的同步时钟的设计的最大不同之处是，WRC是异步设计。从这个角度来讲，WRC设计起来要比CPU难。因为，通常在同步时钟的ASIC设计中，经过前仿真和后仿真，芯片通常不会再有时序竞争的问题，但是在异步的WRC设计中，时钟往往是本地产生的，在加上竞争信号的不确定性，因此在后仿真中还要特别注重结合厂家库和工艺，然后对每一异步信号逐一地认真仿真。WRC研制过程中我们曾吃过异步信号的亏，后来经过结合具体厂家库和工艺，经过反复的仿真、测试和实验，最终使设计获得成功。<br>
                  </p>
                  <p>　　WRC芯片设计技术，要解决的第二个问题是输出Pad驱动问题。在CPU设计中输出Pad驱动通常都比较标准和均匀，而WRC连接Home节点机要经过WRC底板的印制线，连接底板和电缆线的接插件，接插件到节点机的长电缆线（控制在1米左右），连接电缆线和节点机接口板的接插件和节点机的接口板的印制线。因此WRC在与Home节点机连接的信号Pad就要加大它的驱动能力。这样一来，由于加大驱动，在WRC驱动的终端则容易产生信号传输的地弹（Grand 
                    Bounce）现象。<br>
                  </p>
                  <p>　　我们知道，影响地弹的因素，主要是芯片地线的电感和电阻；负载电容和输出下降边速率等。为了减少地弹，在WRC设计中采取了以下技术和措施： 
                    <br>
                  </p>
                  <ul>
                    <li>尽量减少输出负载电流。<br>
                    </li>
                    <li>采用带有Slew Rate的Pad。<br>
                    </li>
                    <li>对WRC芯片内部的Die的多余pin接上Vss，并采用Double Bonding 工艺，以减少芯片内地线的电感。<br>
                    </li>
                    <li>在信号输入端采用Schmitt Trigger Input Buffer，以增加抗干扰能力。<br>
                    </li>
                    <li>适当加大输出信号的始端串接匹配电阻。<br>
                    </li>
                    <li>适当加大WRC底板上的高频滤波电容。<br>
                    </li>
                  </ul>
                  <p>　　在采用了以上技术和措施后，经过实测WRC驱动的终端产生的信号传输的地弹，在最坏情况下能控制在0.5V以内。</p>
                  <p><b>二、高速电路技术</b><br>
                  </p>
                  <p>　　在曙光高性能服务器高速电路技术设计中，比较突出的高速电路技术设计表现为输出信号的传输和输出信号的串扰（crosstalk）。<br>
                  </p>
                  <p>（1） 输出信号的传输。<br>
                  </p>
                  <p>　　当电路信号在信号线中传输时，影响传输信号的品质的主要因素是传输线的阻抗匹配和传输线的线长。<br>
                  </p>
                  <p>　　由于WRC连接Home节点机要经过WRC底板的印制线，连接底板和电缆线的接插件，接插件到节点机的长电缆线，连接电缆线和节点机接口板的接插件和节点机的接口板的印制线五个关口。这么多种的传输介质和长线传输，必然影响传输信号的质量。虽然我们在传输介质上已经对它们的特性阻抗作了严格的控制，但是在信号传输终端，还是由于阻抗的不匹配而引起的反射波的叠加幅度，在最坏情况下可达1.2V。<br>
                  </p>
                  <p>　　为了减少反射波幅度，我们曾做了二种实验，一是在信号传输的终端加82pf/71W的阻容终端匹配；二是加Buffer隔离，即从节点机接口板来的数据（信号）进入WRC底板插座后，加74F244器件作为Buffer，然后再传入WRC；而从WRC输出数据在WRC底板接近插座处，接入74F244作Buffer，再经Strip 
                    Cable进入节点机接口板。<br>
                  </p>
                  <p>　　以上两种措施均较好地解决了长线不匹配问题。最后定型，则采用了上述的实验二。<br>
                  </p>
                  <p>　　最后在产品的终端信号的实际测试中，最坏情况下，其反射叠加波（包括地弹）的最大幅度均能控制在0.8V之内。<br>
                  </p>
                  <p>（2）输出信号的串扰<br>
                    　　串扰 (crosstalk) 问题也是高速电路传输技术突出的问题。<br>
                    　　由于CMOS边值很快（fast edge rates），在加上WRC底板中WRC之间的互连基本上均是成组的代码线，所以串扰问题难免。在设计WRC底板时，我们采取了相应的措施来减少前沿和后沿的串扰（forward 
                    and reverse crosstalk），这些措施包括有：<br>
                  </p>
                  <ul>
                    <li> 尽可能加大走线间的距离；<br>
                    </li>
                    <li>尽可能减少走线间的平行线（平行线长度最长控制在10cm内）；<br>
                    </li>
                    <li>使相邻的PCB层中的信号走线彼此垂直；<br>
                    </li>
                    <li>使用电源和地线层作为信号层间的屏蔽。<br>
                    </li>
                    <li>使用先进的EDA工具，对不同的平行印制走线进行评估，以获得最佳电性能的走线方案。<br>
                    </li>
                  </ul>
                  <p>　　经过采用上述的措施，我们在WRC底板上，实际测试平行走线最大串扰幅度均控制在0.5V之内。<br>
                  </p>
                  <p>　　经过曙光2000超级服务器中芯片和高速电路的设计，我们体会到，硬件设计，尤其是电路工程设计，是与机器的系统设计关系密切。也就是说，对不同的机器（硬件）系统，尤其它的电路工程设计规范是不同的。在机器运行时，信号在硬件中传播是错综复杂的，对不同的系统构造信号传输也是千差万别的。信号在硬件中传播既不能用一组解析方程来表达，也不能用一组线性方程来求解。通常在书本或资料中，电路分析大多是在理想的和简化的条件和环境下进行的。这与实际的机器系统硬件差距甚远。然而，即便通过模仿机器实际情况搭出一个实验电路进行实验测试，但大多由于条件不许可，实验电路仍然不能逼真实际的机器系统硬件。<br>
                  </p>
                  <p>　　我们觉得要培养一个较成熟的硬件设计人员，第一，其培养时间要比计算机其它设计人员要长，因为硬件设计（除硬件逻辑设计或在EDA环境中行为级设计），尤其是高速电路工程设计，必须具备四个方面知识，才能较自如的面对高速电路工程设计的高技术，它们是：<br>
                  </p>
                  <ul>
                    <li>书本的理论和理想的电路分析。（这是建立硬件设计的基本基础和概念）<br>
                    </li>
                    <li>针对本特定的硬件系统，在实验室里搭起实验电路或模型机进行实验测试。（这是建立硬件设计的基本依据） <br>
                    </li>
                    <li>熟练使用仪器和设备。（这是人们观测并获得硬件设计参数的重要手段）<br>
                    </li>
                    <li>有丰富的硬件实践经验。（这有助于对硬件设计或硬件设计出现的故障迅速作出正确的判断和裁决）<br>
                    </li>
                  </ul>
                  <p>　　第二，培养一个较成熟的硬件设计人员需要有较雄厚的物质基础。因为它要建立一套完整和良好的工作环境，其中包括备有较完备的EDA设计工具和精密的仪器设备。否则对于高水平的硬件设计是寸步难行或者只能是纸上谈兵。</p>
                  <p>&nbsp;</p>
                  </td>
              </tr>
            </table>
            <table width="92%" border="0" cellspacing="5" cellpadding="0">
              <tr bgcolor="#ECFBDB"> 
                <td colspan="2"> 
                  <div align="center"><font color="#000000">作者介绍</font></div>
                </td>
              </tr>
              <tr> 
                <td width="31%"><img src="image/fxw.jpg" width="124" height="149"></td>
                <td width="69%">　　计算所系列大型机的研制者之一，多次获得中科院和国家科技进步奖，1992年获国家级突出贡献奖。1996年加盟智能中心，负责曙光2000和曙光3000互连芯片的研制。2001年底光荣退休。</td>
              </tr>
            </table>
          </td>
          <td bgcolor="#BA7429" width="1"><img src="../images/spacer.gif" width="1" height="1"></td>
        </tr>
      </table>
      <table width="480" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td width="11"><img src="../images/history_cor03.gif" width="11" height="6"></td>
          <td background="../images/history_bbg.gif"><img src="../images/history_bbg.gif" width="7" height="6"></td>
          <td width="10"><img src="../images/history_cor04.gif" width="10" height="6"></td>
        </tr>
      </table>
      
      <br>
      <table width="480" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td width="11"><img src="../images/history_bar_start.gif" width="11" height="22"></td>
          <td width="100" background="../images/history_bar_bg01.gif">&nbsp;</td>
          <td width="7" background="../images/history_bar_bg01.gif">&nbsp;</td>
          <td background="../images/history_bar_bg01.gif" align="right"> 
            <table width="160" border="0" cellspacing="0" cellpadding="0">
              <tr> 
                <td width="20" align="center">&nbsp;</td>
                <td class="padding01" width="70">&nbsp;</td>
                <td width="20" align="center"><img src="../images/history_bar_previous.gif" width="13" height="22"></td>
                <td class="padding01"><a href="road7.htm">上一页</a></td>
              </tr>
            </table>
          </td>
          <td width="10"><img src="../images/history_bar_end.gif" width="10" height="22"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<br>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td bgcolor="#999999" height="1"><img src="../image/dot00.gif" width="1" height="1"></td>
  </tr>
  <tr> 
    <td align="center"> 
      <p><font face="Verdana, Arial, Helvetica, sans-serif" size="1">Copyright 
        for NCIC All Rights Reserved</font> <br>
        本网站版权归国家智能计算机研究开发中心所有<br>
      </p>
    </td>
  </tr>
</table>
</body>
</html>
