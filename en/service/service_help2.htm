<html>
<head>
<title>高性能计算服务</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<link rel="stylesheet" href="../css/ncic.css" type="text/css">
<script language="JavaScript">
<!--
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
//-->
</script>
</head>

<body bgcolor="#FFFFFF" text="#000000" leftmargin="0" topmargin="0" onLoad="MM_preloadImages('../images/arrow_02.gif')">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="547"><img src="../image/top.jpg" width="547" height="123"></td>
    <td background="../image/top_1.jpg" align="right"><img src="../image/top_2.jpg" width="131" height="123"></td>
  </tr>
</table>
<table width="720" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="163" align="center" valign="top"> 
      <table width="163" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td><a href="../about/about.htm"><img src="../image/niu1.jpg" width="163" height="26" border="0"></a></td>
        </tr>
      </table>
      <table width="163" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td><a href="../product/product.htm"><img src="../image/niu2.jpg" width="163" height="23" border="0"></a></td>
        </tr>
      </table>
      <table width="163" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td><a href="../road/road.htm"><img src="../image/niu3.jpg" width="163" height="23" border="0"></a></td>
        </tr>
        <tr> 
          <td><a href="../paper/paper.htm"><img src="../image/niu4.jpg" width="163" height="23" border="0"></a></td>
        </tr>
        <tr> 
          <td><a href="../now/now.htm"><img src="../image/niu5.jpg" width="163" height="24" border="0"></a></td>
        </tr>
        <tr> 
          <td><a href="../news/news.htm"><img src="../image/niu6.jpg" width="163" height="26" border="0"></a></td>
        </tr>
        <tr> 
          <td><a href="../link/link.htm"><img src="../image/niu7.jpg" width="163" height="23" border="0"></a></td>
        </tr>
        <tr> 
          <td><a href="service.htm"><img src="../image/niu8.jpg" width="163" height="24" border="0"></a></td>
        </tr>
      </table>
      <br>
      <a href="../index_e.htm"><img src="../image2/back.gif" width="80" height="17" align="right" border="0"></a><br>
      <br>
      <br>
      <br>
    </td>
    <td width="30">&nbsp;</td>
    <td valign="top" align="right"> 
      <table width="480" border="0" cellspacing="0" cellpadding="0" >
        <tr> 
          <td align="right" valign="bottom"><img src="../image2/top2.gif" width="476" height="97"></td>
        </tr>
        <tr> 
          <td align="right" height="5"><img src="../image/line.gif" width="481" height="3"></td>
        </tr>
      </table>
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td height="10"><img src="../images/spacer.gif" width="1" height="1"></td>
        </tr>
      </table>
      <table width="480" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td width="11"><img src="../images/service_bar_start.gif" width="11" height="22"></td>
          <td class="padding01" align="center" background="../images/service_bar_bg.gif"> 
            在线帮助 </td>
          <td width="7" align="right" background="../images/service_bar_bg.gif"><img src="../images/service_bar_splite.gif" width="7" height="22"></td>
          <td background="../images/service_bar_bg01.gif" align="right"> 
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr> 
                <td align="center" width="20"><img src="../images/arrow_03.gif" width="8" height="20" border="0" name="ansys"></td>
                <td class="padding01" width="50"><a href="service_help.htm" class="link05" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('ansys','','../images/arrow_02.gif',1)">上机入门</a></td>
                <td width="20" align="center"><img src="../images/arrow_03.gif" width="8" height="20" border="0" name="star"></td>
                <td class="padding01" width="50"><a href="service_help1.htm" class="link05" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('star','','../images/arrow_02.gif',1)">编译环境</a></td>
                <td align="center" width="20"><img src="../images/arrow_03.gif" width="8" height="20" border="0" name="dyna"></td>
                <td class="padding01" width="60"><a href="service_help2.htm" class="link05" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('dyna','','../images/arrow_02.gif',1)">PVM的使用</a> 
                </td>
                <td width="20" align="center"><img src="../images/arrow_03.gif" width="8" height="20" border="0" name="gauss"></td>
                <td class="padding01" width="60"><a href="service_help3.htm" class="link05" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('gauss','','../images/arrow_02.gif',1)">MPI的使用</a></td>
                <td align="center" width="20"><img src="../images/arrow_03.gif" width="8" height="20" name="link"></td>
                <td class="padding01" width="60"><a href="service_help4.htm" class="link05" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('link','','../images/arrow_02.gif',1)">ESSL的使用</a></td>
                <td class="padding01" align="center">&nbsp;</td>
              </tr>
            </table>
          </td>
          <td width="10"><img src="../images/service_bar_end.gif" width="10" height="22"></td>
        </tr>
      </table>
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td height="5"><img src="../images/spacer.gif" width="1" height="1"></td>
        </tr>
      </table>
      <table width="480" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td width="11"><img src="../images/service_cor01.gif" width="11" height="6"></td>
          <td background="../images/service_tbg.gif"><img src="../images/service_tbg.gif" width="7" height="6"></td>
          <td width="10"><img src="../images/service_cor02.gif" width="10" height="6"></td>
        </tr>
      </table>
      <table width="480" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td bgcolor="#74558D" width="1"><img src="../images/spacer.gif" width="1" height="1"></td>
          <td> 
            <table width="100%" border="0" cellspacing="0" cellpadding="8">
              <tr> 
                <td> 
                  <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr> 
                      <td align="center"><b><font size="4">PVM简介</font></b></td>
                    </tr>
                  </table>
                  　　PVM（Parallel Virtual Machine）也是消息传递类并行软件开发环境，我们在曙光3000上移植了PVM3.3.11软件。曙光3000上PVM提供的用户接口函数与标准PVM的基本相同，但曙光3000上PVM是专门为曙光3000设计的，因而它能够有效地利用曙光3000的硬件特性和底层提供的高速通讯库做大规模的并行计算。<br>
                  <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr> 
                      <td background="../images/dotline_02.gif"><img src="../images/dotline_02.gif" width="4" height="10"></td>
                    </tr>
                  </table>
                  <br>
                  <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr> 
                      <td width="11"><img src="../images/gray_cor01.gif" width="11" height="6"></td>
                      <td background="../images/gray_tbg.gif"><img src="../images/gray_tbg.gif" width="1" height="6"></td>
                      <td width="10"><img src="../images/gray_cor02.gif" width="10" height="6"></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#f6f6f6">
                    <tr> 
                      <td bgcolor="#74558D" width="1"><img src="../images/spacer.gif" width="1" height="1"></td>
                      <td> 
                        <table width="100%" border="0" cellspacing="0" cellpadding="8">
                          <tr> 
                            <td bgcolor="#FFFFFF"> 
                              <p><b>1.PVM的编程</b><br>
                                <br>
                                　　曙光3000上的PVM程序通常支持有两种编程模式：Master-Slave模式（MPMD）和SPMD模式。Master-Slave模式的PVM程序是由运行于PVM主机上的Master 
                                PVM程序和运行于计算节点的若干个Slave PVM程序组成的。SPMD模式的PVM程序只包含一个程序，它既可运行于PVM主机上又可运行于计算节点上。<br>
                                <br>
                                　　曙光3000上的PVM与网络版PVM相比，主要区别如下：<br>
                                <br>
                                　　采用静态资源分配策略，所有派生的进程都属于同一任务，且不再支持以下函数接口：pvm_addhosts, 
                                pvm_archcode, pvm_delhosts, pvm_getmwid, pvm_hostsync, 
                                pvm_notify, pvm_recvf, pvm_reg_hoster, pvm_reg_rm, 
                                pvm_reg_tasker, pvm_setmwid, pvm_start_pvmd。<br>
                                <br>
                                　　为了有效地支持在没有PVMD情况下的group模式的PVM程序，我们规定省缺地当前的group模式是静态的，即组中任务在执行pvm_joingroup时静态确定，不再变动。若需要支持动态group模式，则设置环境变量PVM_STATIC为2。</p>
                              <p><b>2.PVM程序的编译</b></p>
                              <p><b>Include文件</b></p>
                              <p>　　PVM提供了一个供C语言使用的头文件 $PVM_ROOT/include/pvm3.h和一个供Fortran语言使用的头文件$PVM_ROOT/include/fpvm3.h，它们定义了PVM 
                                函数库中所需的全局变量和常数。它们的使用方式如下：</p>
                              <p>C语言：<br>
                                　　在文件头使用<br>
                                　　　　# include &lt;pvm3.h&gt;<br>
                                　　并在编译时使用：-I$(PVM_ROOT)/include</p>
                              <p>Fortran语言：<br>
                                　　需给出全路径名，如：<br>
                                　　　　include '/cluster/pvm/mesh/include/fpvm3.h'<br>
                                　　也可用链接方式，即在源程序文件所在目录下，在Unix提示符下执行：<br>
                                　　　　% ln -sf /cluster/pvm/mesh/include/fpvm3.h 
                                fpvm3.h<br>
                                　　这样用户在Fortran源程序中可直接使用 include 'fpvm3.h'，而不必使用全路径名。</p>
                              <p><b>PVM函数库的链接</b></p>
                              <p>C语言：链接<br>
                                　　$(PVM_ROOT)/lib/$(PVM_ARCH)/libpvm3.a（net版）<br>
                                　　$(PVM_ROOT)/lib/$(PVM_ARCH)/libpvm3.a /cluster/bcl/lib/libbcl.a 
                                /cluster/rms/lib/ librms.a /cluster/sdr/lib/libsdr.a 
                                　　　$(MPI_ROOT)/lib/libmpich.a（mesh版）</p>
                              <p>Fortran语言：除上述PVM库外还要链接<br>
                                　　$(PVM_ROOT)/lib/$(PVM_ARCH)/libfpvm3.a</p>
                              <p>组功能：若用到了组功能，还要链接：<br>
                                　　$(PVM_ROOT)/lib/$(PVM_ARCH)/libgpvm3.a（net版）</p>
                              <p><b>编译PVM应用程序</b></p>
                              <p>　　对于PVM程序，可使用以下三种方法之一进行编译。</p>
                              <p>1）使用pvmcc和pvmf77进行编译</p>
                              <p>　　格式：<br>
                                　　　pvmf77 *.f (Fortran程序)<br>
                                　　　pvmcc *.c (C语言程序)</p>
                              <p>　　事实上，pvmf77和pvmcc是为方便用户而写的两个shell命令文件，驻留于目录/cluster/pvm/mesh/lib之下，用户可直接调用来编译已有的Fortran或C 
                                语言应用程序，编译选项完全类似于一般的Fortran或C 语言的编译器f77和cc。</p>
                              <p>2）使用make命令进行编译</p>
                              <p>　　与一般Unix系统的make使用方法相同，只需在make文件中加以适当的库函数链接，并设置适当的路径（需链接的函数库和必需的路径见上述说明）。</p>
                              <p>3）使用aimk命令进行编译</p>
                              <p>　　为方便应用程序的编译和链接，PVM系统提供了一个实用程序aimk (Architecture 
                                Independeut Make)。aimk也是一个shell命令文件（见目录/cluster/pvm/mesh/lib下相应文件），它除具有与标准Unix的make程序类似的功能，还能自动为用户设置LIBS和PVM_ARCH的值，缺省情况下的aimk使用的make文件是Makefile.aimk。在/cluster/pvm/net/examples子目录下有文件Makefile.aimk的一个例子。用户可按需要将此文件拷到自己的目录下，并加以修改使用。用aimk编译程序的命令格式为：<br>
                                　　　　% aimk -f flname pss<br>
                                　　其中flname为make文件名，缺省时为Makefile.aimk或makefile，pss为所生成的执行文件名。</p>
                              <p><b>3.PVM应用程序的运行</b></p>
                              <p><b>pvmrun命令</b></p>
                              <p>　　系统提供包装过的pvmrun命令直接运行PVM应用程序，不需要启动pvmd。pvmrun利用资源管理软件RMS提供的run命令，只需使用&quot;-on 
                                0&quot;选项加载PVM主程序到0节点，再由0节点spawn时加载PVM从程序（也可以是SPMD程序）到其它节点。例如：<br>
                                　　　　pvmrun -sz 4 -pl p1 hello。</p>
                              <p>　　pvmrun命令是运行PVM应用程序的最简单方式，也网络版的唯一方式，其格式同run命令（run命令格式参看资源管理RMS的使用说明）。但是，系统也提供了与网络版PVM类似的运行方式，在下面将详细说明。</p>
                              <p><b>启动PVMD</b></p>
                              <p>　　只对网络版有效。运行PVM应用程序要先启动PVMD，申请节点资源。用户应在login节点上，可执行的PVM程序所在的路径下启动PVMD。系统提供两种启动方式，在所允许登录的任一节点上可执行的PVM程序所在的路径下，在Unix提示符下键入下命令：<br>
                                　　1）%pvmd &lt;hostfile&gt;<br>
                                　　2）%pvm<br>
                                　　　　若返回pvm控制台提示符<br>
                                　　　　pvm&gt;<br>
                                　　　　则pvmd已在此节点启动。<br>
                                　　3）% pvm &lt;hostfile&gt;<br>
                                　　　　启动PVMD。</p>
                              <p>　　pvmd的使用格式如下：<br>
                                　　　　pvmd 《节点文件名》 [-pg 《执行程序名》]</p>
                              <p>　　若PVM启动有问题，则会在用户终端或在log文件/tmp/pvml.&lt;uid&gt;中给出有关信息。启动时常遇到的一个问题可能是：<br>
                                　　　　[t80040000]Can't start pvmd<br>
                                　　这往往是由于上次运行PVM非正常结束而引起，因为它可能会遗留下/tmp/pvmd.&lt;uid&gt;文件，这一文件应仅在PVM运行时存在。若启动前存在，则会阻止PVM的启动，将其删除，问题会解决。</p>
                              <p>　　因此，PVM程序有两种运行方式：</p>
                              <p>1）在可执行的PVM程序timing所在的路径下启动PVMD，并执行程序timing。<br>
                                　　　　%pvmd hostfile -pg timing<br>
                                　　即在hostfile列出的节点中运行可执行的PVM程序timing。<br>
                                2）%pvm hostfile<br>
                                　　启动 PVMD。<br>
                                　　　　%pvm<br>
                                　　　　pvmd already running。<br>
                                　　　　pvm&gt; spawn -&gt; nntime<br>
                                　　运行PVM程序nntime<br>
                                　　　　pvm&gt; halt<br>
                                　　结束PVMD。</p>
                              <p><b>4.PVM控制台常用命令</b></p>
                              <p>　　控制台下常用命令有：<br>
                                　　spawn 加载PVM任务<br>
                                　　conf 显示当前虚拟机的配置，包括虚拟机中所有节点机的机器名、运算速度、节点机类型等等。<br>
                                　　quit 退出PVM控制台，返回shell提示符。退出后PVMD仍在运行，在控制台中所进行的一切设置仍然有效。 
                                <br>
                                　　halt 退出PVM控制台，返回到Unix shell提示符。退出后PVMD也退出。<br>
                                　　help 将给出 pvm 控制台下所有可用命令，使用 <br>
                                　　help [command] 将给出 [command] 的详细使用说明。</p>
                              <p></p>
                            </td>
                          </tr>
                        </table>
                      </td>
                      <td bgcolor="#74558D" width="1"><img src="../images/spacer.gif" width="1" height="1"></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr> 
                      <td width="11"><img src="../images/gray_cor03.gif" width="11" height="6"></td>
                      <td background="../images/gray_bbg.gif"><img src="../images/gray_bbg.gif" width="4" height="6"></td>
                      <td width="10"><img src="../images/gray_cor04.gif" width="10" height="6"></td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
          </td>
          <td bgcolor="#74558D" width="1"><img src="../images/spacer.gif" width="1" height="1"></td>
        </tr>
      </table>
      <table width="480" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td width="11"><img src="../images/service_cor03.gif" width="11" height="6"></td>
          <td background="../images/service_bbg.gif"><img src="../images/service_bbg.gif" width="7" height="6"></td>
          <td width="10"><img src="../images/service_cor04.gif" width="10" height="6"></td>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td width="163" align="center" valign="top">&nbsp;</td>
    <td width="30">&nbsp;</td>
    <td valign="top" align="right"> 
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td height="5"><img src="../images/spacer.gif" width="1" height="1"></td>
        </tr>
      </table>
      <table width="480" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td width="11"><img src="../images/service_bar_start.gif" width="11" height="22"></td>
          <td background="../images/service_bar_bg01.gif" width="100" class="padding01">&nbsp;</td>
          <td width="7" background="../images/service_bar_bg01.gif">&nbsp;</td>
          <td background="../images/service_bar_bg01.gif" align="right"> 
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr> 
                <td align="center">&nbsp;</td>
                <td width="20" align="center">&nbsp;</td>
                <td class="padding01" width="70">&nbsp;</td>
                <td width="20" align="center">&nbsp;</td>
                <td class="padding01" width="70">&nbsp;</td>
                <td width="20" align="center"><img src="../images/service_bar_next.gif" width="13" height="22"></td>
                <td class="padding01" width="70"><a href="service_help2_1.htm" class="link05">下一页</a></td>
              </tr>
            </table>
          </td>
          <td width="10"><img src="../images/service_bar_end.gif" width="10" height="22"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td bgcolor="#999999" height="1"><img src="../image/dot00.gif" width="1" height="1"></td>
  </tr>
  <tr> 
    <td align="center"> 
      <font face="Verdana, Arial, Helvetica, sans-serif" size="1">Copyright 
        for NCIC All Rights Reserved</font> <br>
        本网站版权归国家智能计算机研究开发中心所有<br>
      
    </td>
  </tr>
</table>
</body>
</html>
